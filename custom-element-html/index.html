<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test harness for custom-element-html</title>
 
</head>

<body>
  <h1>Test harness for custom-element-html</h1>
  <input type="button" onclick="sendTextToComponent()" value="broadcast">
  <h2>customer element</h2>
  
  <script src="main.js"></script>
  <custom-element-html text="initial text" id="custom1" onHelloEvt="receiveMessage($evt)" ></custom-element-html>
  <div id='messages'>No messages</div>
  <script>
      var count = 0;
      function sendTextToComponent() {
        count ++;
        var customElement = document.getElementById('custom1');
        customElement.setAttribute('text', 'update text: ' + count);
      }
  
      
      function helloEvent(source) {
       
        const msgContainer = document.getElementById('messages');
        msgContainer.innerHTML += "<p><strong>" + source + "</strong> sent message";
      }
      
      var customElement = document.getElementById('custom1');
      customElement.addEventListener('onHelloEvt', function() {
        console.log("event received")
        helloEvent('custom1') 
      });
     
  
    </script> 
</body>
</html>